plugins {
    id "com.moowork.node" version "1.3.1"
}

task buildReactApp(type: NpmTask) {
    dependsOn npmInstall
    args = ["run", "build"]
}

task deployReactApp(type: Copy) {
    dependsOn buildReactApp
    from "${project.projectDir}/frontend/build/"
    include "**/**"
    into "${buildDir}/resources/main/static"
}

task cleanNodeModules(type: Delete) {
    delete "${projectDir}/node_modules"
    delete "${projectDir}/frontend/node_modules"
    delete "${projectDir}/frontend/build"
}